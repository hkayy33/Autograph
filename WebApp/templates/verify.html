{% extends "base.html" %}

{% block title %}Verify Autograph{% endblock %}

{% block content %}
<div class="generate-container">
    <h2 class="text-center mb-4">Verify Instagram Autograph</h2>
    
    {% if error %}
        <div class="notification notification-danger animate__animated animate__fadeInDown">
            <div class="notification-icon">
                <i class="fas fa-exclamation-circle"></i>
            </div>
            <div class="notification-content">{{ error }}</div>
            <button type="button" class="notification-close" onclick="this.parentElement.remove()">
                <i class="fas fa-times"></i>
            </button>
        </div>
    {% endif %}

    {% if success %}
        <div class="modern-alert modern-alert-success animate__animated animate__fadeIn">
            <div class="modern-alert-content">
                <div class="modern-alert-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="modern-alert-text">
                    <h3>Verification Successful!</h3>
                    <p>The autograph has been verified as authentic.</p>
                </div>
            </div>
            <div class="modern-alert-details">
                <div class="detail-item">
                    <div class="detail-label">
                        <i class="fab fa-instagram"></i>
                        <span>Instagram Post</span>
                    </div>
                    <a href="{{ instagram_url }}" target="_blank" class="detail-value instagram-link">
                        View Post <i class="fas fa-external-link-alt"></i>
                    </a>
                </div>
                <div class="detail-item">
                    <div class="detail-label">
                        <i class="far fa-clock"></i>
                        <span>Created at</span>
                    </div>
                    <div class="detail-value">{{ autograph.created_at.strftime('%B %d, %Y') }}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">
                        <i class="fas fa-check-circle"></i>
                        <span>Status</span>
                    </div>
                    <div class="detail-value status-badge">
                        <span class="status-dot"></span>
                        Verified
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <form method="POST" class="mt-4">
            <div class="form-group">
                <label for="instagram_url">Instagram Post URL</label>
                <input type="url" class="form-control" id="instagram_url" name="instagram_url" required
                       placeholder="https://www.instagram.com/p/...">
                <small class="form-text">Enter the URL of the Instagram post containing the autograph you want to verify.</small>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-check-circle me-2"></i> Verify Autograph
                </button>
            </div>
        </form>
    {% endif %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add loading state to button on form submission
    const form = document.querySelector('form');
    const submitButton = form?.querySelector('button[type="submit"]');
    
    if (form) {
        form.addEventListener('submit', function() {
            if (submitButton) {
                submitButton.disabled = true;
                submitButton.innerHTML = '<div class="loading-success"></div> Verifying...';
            }
        });
    }
});
</script>
{% endblock %} 